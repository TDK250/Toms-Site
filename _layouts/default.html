<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">

  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
  
  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ '/feed.xml' | relative_url }}">

  <!-- Basic SEO tags -->
  <meta name="author" content="{{ site.author.name | default: site.title }}">
  <meta property="og:title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta property="og:description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
  <meta property="og:type" content="website">

  <!-- Theme Script -->
  <script>
    // Apply saved theme or system preference before page loads
    (function() {
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
</head>

<body>
  <div class="site-wrapper">
    
    <!-- Header -->
    <header class="site-header">
      <div class="container">
        <nav class="site-nav">
          <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
          
          <div class="nav-links">
            <a href="{{ '/professional' | relative_url }}" class="nav-link">Professional</a>
            <a href="{{ '/blog' | relative_url }}" class="nav-link">Blog</a>
            <a href="{{ '/projects' | relative_url }}" class="nav-link">Projects</a>
            <a href="{{ '/contact' | relative_url }}" class="nav-link">Contact</a>
            
            <!-- Theme Toggle -->
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
              <span class="theme-icon">üåì</span>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="site-main">
      <div class="container">
        {{ content }}
      </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <p>&copy; {{ 'now' | date: "%Y" }} {{ site.author.name }}. Built with Jekyll & hosted on GitHub Pages.</p>
          <div class="social-links">
            {% if site.social.email %}
              <a href="mailto:{{ site.social.email }}" aria-label="Email">üìß</a>
            {% endif %}
            {% if site.social.github %}
              <a href="https://github.com/{{ site.social.github }}" aria-label="GitHub">üêô</a>
            {% endif %}
            {% if site.social.linkedin %}
              <a href="https://linkedin.com/in/{{ site.social.linkedin }}" aria-label="LinkedIn">üíº</a>
            {% endif %}
            {% if site.social.twitter %}
              <a href="https://twitter.com/{{ site.social.twitter }}" aria-label="Twitter">üê¶</a>
            {% endif %}
            <a href="{{ '/feed.xml' | relative_url }}" aria-label="RSS Feed">üì°</a>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <!-- Theme Toggle Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;

      themeToggle.addEventListener('click', function() {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });
    });
  </script>
</body>

</html>